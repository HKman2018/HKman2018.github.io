<!DOCTYPE html>
<html lang="zh-TW"><head>
  <meta charset="utf-8">
  <title>Kin &#39;s blog</title>

  <!-- mobile responsive meta -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Markdown語法介紹">
  <meta name="author" content="kin">
  <meta name="generator" content="Hugo 0.79.1" />

  <!-- plugins -->
  
  <link rel="stylesheet" href="https://hkman2018.github.io/plugins/bootstrap/bootstrap.min.css ">
  
  <link rel="stylesheet" href="https://hkman2018.github.io/plugins/slick/slick.css ">
  
  <link rel="stylesheet" href="https://hkman2018.github.io/plugins/themify-icons/themify-icons.css ">
  
  <link rel="stylesheet" href="https://hkman2018.github.io/plugins/venobox/venobox.css ">
  

  <!-- Main Stylesheet -->
  
  <link rel="stylesheet" href="https://hkman2018.github.io/scss/style.min.css" media="screen">

  <!--Favicon-->
  <link rel="shortcut icon" href="https://hkman2018.github.io/images/favicon.png " type="image/x-icon">
  <link rel="icon" href="https://hkman2018.github.io/images/favicon.png " type="image/x-icon">

  <!-- google analitycs -->
  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'Your ID', 'auto');
    ga('send', 'pageview');
  </script>

</head><body>
<!-- preloader start -->
<div class="preloader">
  
</div>
<!-- preloader end -->
<!-- navigation -->
<header class="navigation">
  <div class="container">
    
    <nav class="navbar navbar-expand-lg navbar-white bg-transparent border-bottom pl-0">
      <a class="navbar-brand mobile-view" href="https://hkman2018.github.io/"><img class="img-fluid"
          src="https://hkman2018.github.io/images/ting.PNG" alt="Kin &#39;s blog"></a>
      <button class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#navigation">
        <i class="ti-menu h3"></i>
      </button>

      <div class="collapse navbar-collapse text-center" id="navigation">
        <div class="desktop-view">
          <ul class="navbar-nav mr-auto">
            
            <li class="nav-item">
              <a class="nav-link" href="bobodee0130@gmail.com"><i class="ti-email"></i></a>
            </li>
            
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/HKman2018"><i class="ti-github"></i></a>
            </li>
            
          </ul>
        </div>

        <a class="navbar-brand mx-auto desktop-view" href="https://hkman2018.github.io/"><img class="img-fluid"
            src="https://hkman2018.github.io/images/ting.PNG" alt="Kin &#39;s blog"></a>

        <ul class="navbar-nav">
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://hkman2018.github.io/about">About</a>
          </li>
          
          
          
          <li class="nav-item">
            <a class="nav-link" href="https://hkman2018.github.io/contact">Contact</a>
          </li>
          
          
        </ul>

        
        <!-- search -->
        <div class="search pl-lg-4">
          <button id="searchOpen" class="search-btn"><i class="ti-search"></i></button>
          <div class="search-wrapper">
            <form action="https://hkman2018.github.io//search" class="h-100">
              <input class="search-box px-4" id="search-query" name="s" type="search" placeholder="Type & Hit Enter...">
            </form>
            <button id="searchClose" class="search-close"><i class="ti-close text-dark"></i></button>
          </div>
        </div>
        

        
      </div>
    </nav>
  </div>
</header>
<!-- /navigation -->

<section class="section-sm">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 mx-auto">
        
        <a href="/categories/notes"
          class="text-primary">Notes</a>
        
        <h2>notes</h2>
        <div class="mb-3 post-meta">
          <span>By kin</span>
          
          <span class="border-bottom border-primary px-2 mx-1"></span>
          <span>19 February 2021</span>
          
        </div>
        
        <img src="https://hkman2018.github.io/images/post/post-4.jpg" class="img-fluid w-100 mb-4" alt="notes">
        
        <div class="content mb-5">
          <h1 id="notes">Notes</h1>
<p> </p>
<h3 id="add-ssh-key">Add SSH key</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">  <span style="color:#a6e22e">ssh</span><span style="color:#f92672">-</span><span style="color:#a6e22e">keygen</span>
 
  <span style="color:#a6e22e">cat</span> .<span style="color:#a6e22e">ssh</span><span style="color:#f92672">/</span><span style="color:#a6e22e">id_rsa</span>.<span style="color:#a6e22e">pub</span>
</code></pre></div><p><strong>取得ssh key 加入gitlab</strong>
 </p>
<h3 id="function">function</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">可有參數或無參數</span>){
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">值</span>
}
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">addSum</span>(){
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">sum</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> 
  <span style="color:#75715e">//當執行return function時也給於 sum return 的數值,
</span><span style="color:#75715e"></span>  <span style="color:#75715e">//再執行時sum的值是上次return的值&lt;br&gt;
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">return</span> (<span style="color:#a6e22e">num</span>)=&gt;{ 
    <span style="color:#a6e22e">sum</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">sum</span> <span style="color:#f92672">+</span><span style="color:#a6e22e">num</span>
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">sum</span>
  }
}
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">add</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">addSum</span>()<span style="color:#75715e">// closure 的addSum現時值為0
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">add</span>(<span style="color:#ae81ff">3</span>))<span style="color:#75715e">//值 3
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">add</span>(<span style="color:#ae81ff">3</span>))<span style="color:#75715e">//值 6 
</span></code></pre></div><p> </p>
<h3 id="instanceof-object-or-array">instanceof Object or Array</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">print</span>() {
    <span style="color:#66d9ef">let</span> <span style="color:#66d9ef">final</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">key</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">hk</span>) {
        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">hk</span>[<span style="color:#a6e22e">key</span>]
        <span style="color:#66d9ef">final</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">key</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;: &#34;</span>;
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">value</span> <span style="color:#66d9ef">instanceof</span> Array) {
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">item</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">value</span>) {
                <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">item</span> <span style="color:#66d9ef">instanceof</span> Object) {
                    <span style="color:#66d9ef">final</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">final</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\n&#34;</span>;
                    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">key2</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">item</span>) {
                        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">value2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">item</span>[<span style="color:#a6e22e">key2</span>];
                        <span style="color:#66d9ef">final</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">final</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">key</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;_&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">key2</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;: &#34;</span> 
                        <span style="color:#f92672">+</span> <span style="color:#a6e22e">value2</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\n&#34;</span>
                    }
                } <span style="color:#66d9ef">else</span>
                    <span style="color:#66d9ef">final</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">item</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34; 你好&#34;</span>;
            }
        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">value</span> <span style="color:#66d9ef">instanceof</span> Object) {
            <span style="color:#66d9ef">final</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">final</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\n&#34;</span>;
            <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">key2</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">value</span>) {
                <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">value2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">value</span>[<span style="color:#a6e22e">key2</span>];
                <span style="color:#66d9ef">final</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">final</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">key</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;_&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">key2</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;: &#34;</span> 
                <span style="color:#f92672">+</span> <span style="color:#a6e22e">value2</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;\n&#34;</span>
            }
        } <span style="color:#66d9ef">else</span>
            <span style="color:#66d9ef">final</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">value</span>
        <span style="color:#66d9ef">final</span> <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;\n&#34;</span>;
    }
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">final</span>;
}
<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">print</span>())
</code></pre></div><p> </p>
<h3 id="check-string">check string</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript">   <span style="color:#66d9ef">string</span> <span style="color:#960050;background-color:#1e0010">不能改變</span>
   <span style="color:#a6e22e">Json</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">obj</span>)<span style="color:#f92672">==</span><span style="color:#a6e22e">Json</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">obj2</span>)
   <span style="color:#f92672">===&gt;</span><span style="color:#66d9ef">true</span>
</code></pre></div><p> </p>
<h3 id="class-interface-and-abstract">class interface and abstract</h3>
<pre><code>1.interface的方法全都是抽象方法
  abstract則有一般方法和抽象方法
  抽象方法指的是沒有「實作」出來的方法

2.
interface與abstract類別都不能直接用來建立物件實體，
必須由一個標準類別來繼承它，實作其抽象方法，
然後再以此建立物件實體。

3.
interface可多重繼承interface
abstract只能單一繼承

4.
interface沒有建構子
abstract有建構子

5.
interface沒有內建的super與this變數
abstract有內建的super與this變數

6.
interface的成員變數全都是static final型式
abstract類別的成員變數比照一般類別

7.
interface內的方法只可封裝public、default
abstract內的方法只可封裝public、default、protected

8.
需要使用迂迴的方式去找出實體類別間的對應關係，
所以與抽象類別的速度相比之下較為緩慢
</code></pre>
<p> </p>
<h3 id="response-同一個route-不能用兩次response-所以用return-出去-can-not-find-header-可以用return解決">response 同一個route 不能用兩次response 所以用return 出去 <code>can not find header</code> 可以用<code>return</code>解決</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">   <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">authPass</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">req</span>,<span style="color:#a6e22e">res</span>,<span style="color:#a6e22e">next</span><span style="color:#f92672">:</span><span style="color:#a6e22e">express</span>.<span style="color:#a6e22e">NextFunction</span>)=&gt;{
     <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">req</span>,<span style="color:#a6e22e">session</span>[<span style="color:#e6db74">&#39;user&#39;</span>]){
       <span style="color:#a6e22e">next</span>() 
     }<span style="color:#66d9ef">else</span>{
       <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">redirect</span>(<span style="color:#e6db74">&#39;/&#39;</span>)
     }
   }

   <span style="color:#a6e22e">login</span> <span style="color:#a6e22e">authPass</span> <span style="color:#a6e22e">一定要擺係public之後</span> <span style="color:#a6e22e">或者</span> <span style="color:#a6e22e">用app</span>.<span style="color:#a6e22e">use</span>(<span style="color:#e6db74">&#39;/login&#39;</span>,
   <span style="color:#a6e22e">express</span>.<span style="color:#66d9ef">static</span>(<span style="color:#e6db74">&#39;/userFile&#39;</span>))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">async</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">getApples</span>(){
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">res</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">&#39;/apple&#39;</span>)
  <span style="color:#75715e">//server -&gt;Internet -&gt; client
</span><span style="color:#75715e"></span>  <span style="color:#75715e">//Object -&gt; string  -&gt; object
</span><span style="color:#75715e"></span>  <span style="color:#75715e">//呢度嘅res.json與server 的res.json()巧用正好相反
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">apples</span> <span style="color:#f92672">=</span>  <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">json</span>()<span style="color:#75715e">//string-&gt;object
</span><span style="color:#75715e"></span>}
<span style="color:#66d9ef">async</span>  <span style="color:#a6e22e">createApple</span>(){
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">apple</span> <span style="color:#f92672">=</span>{
    <span style="color:#a6e22e">weight</span><span style="color:#f92672">:</span><span style="color:#ae81ff">300</span>,
    <span style="color:#a6e22e">price</span><span style="color:#f92672">:</span><span style="color:#ae81ff">200</span>
  }
  <span style="color:#75715e">//browser send Async request 嘅function
</span><span style="color:#75715e"></span>  <span style="color:#75715e">//1 send 去咩 route
</span><span style="color:#75715e"></span>  <span style="color:#75715e">//2 Http method
</span><span style="color:#75715e"></span>  <span style="color:#75715e">//3 headers &amp; body
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">res</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">&#39;/apple&#39;</span>,{
    <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;POST&#34;</span>,
    <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span>{
      <span style="color:#e6db74">&#34;Content-Type&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;application/json&#34;</span>
    },
    <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span><span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">apple</span>)
  })
  <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">status</span> <span style="color:#f92672">===</span><span style="color:#ae81ff">200</span>){
  <span style="color:#75715e">//將response body 由text 轉返 Javascript Object
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">json</span>()<span style="color:#75715e">//string -&gt;object
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">result</span>)
  }<span style="color:#66d9ef">else</span>(<span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">status</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">400</span>){
    <span style="color:#75715e">//status 400係唔會炒左個promise
</span><span style="color:#75715e"></span>  }
}
</code></pre></div><p> </p>
<h3 id="上傳image-留意地方">上傳image 留意地方</h3>
<ul>
<li>要留意上傳時如果 <code>' '</code> 便會出現error 需要判是否有value</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">  <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">server</span> 
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span>{ 
      <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span><span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">text</span>,
      <span style="color:#a6e22e">image</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;&#39;</span>
    }
    <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">file</span>){
      <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">image</span> <span style="color:#f92672">=</span><span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">file</span>.<span style="color:#a6e22e">filename</span>
    }
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">in</span> <span style="color:#a6e22e">javascript</span>
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">formData</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">FormData</span>();
    <span style="color:#a6e22e">formData</span>.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;content&#39;</span>,<span style="color:#a6e22e">form</span>.<span style="color:#a6e22e">content</span>.<span style="color:#a6e22e">value</span>);
    <span style="color:#a6e22e">formData</span>.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;image&#39;</span>,<span style="color:#a6e22e">form</span>.<span style="color:#a6e22e">image</span>.<span style="color:#a6e22e">files</span>[<span style="color:#ae81ff">0</span>]);
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">res</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">await</span> <span style="color:#a6e22e">fetch</span>(<span style="color:#e6db74">&#39;/memos&#39;</span>,{
                <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;POST&#34;</span>,
                <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span><span style="color:#a6e22e">formData</span> <span style="color:#75715e">//已打包成JSON 不需要json.stringify()
</span><span style="color:#75715e"></span>            });

</code></pre></div><ul>
<li>FormData 可以用來收集表單資訊，如果有個 form 代表著 <!-- raw HTML omitted --> 標籤的 DOM，可以直接作為 FormData 建構之用</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">formData</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">FormData</span>(<span style="color:#a6e22e">form</span>);
</code></pre></div><p>使用 XMLHttpRequest 來進行 POST，呼叫 send 方法時，可以將 FormData 實例當成引數傳入，這時請求的 <strong>Content-Type</strong>一定是 <strong>multipart/form-data</strong>，無需也不能自行設置請求標頭 <strong>Content-Type</strong>。</p>
<p>如果只是使用 FormData 作為一種表單序列化時的簡便 API，伺服端必須能處理 <strong>multipart/form-data</strong>內容，而不是單純透過請求參數的 API 來取得相關請求參數。</p>
<p>如果表單中有 type = &ldquo;file&rdquo; 的 input 標籤，當表單 DOM 物件被當成 FormData 建構時的引數，可以直接進行檔案上傳，如果是使用 append 方法，加入 type = &ldquo;file&rdquo; 的 input 標籤選取之檔案，例如只選取一個檔案的情況，可以如下撰寫</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">photo</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;photo&#39;</span>);
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">formData</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">FormData</span>();
<span style="color:#a6e22e">formData</span>.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;photo&#39;</span>, <span style="color:#a6e22e">photo</span>.<span style="color:#a6e22e">files</span>[<span style="color:#ae81ff">0</span>]);
</code></pre></div><p> </p>
<h3 id="html-form-submission">HTML Form Submission</h3>
<p>in <code>.html</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">form</span> <span style="color:#a6e22e">action</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/contact&#34;</span><span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span><span style="color:#f92672">&gt;</span>
...
...
<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/form&gt;</span>
</code></pre></div><p>in <code>server</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">...
<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">use</span>(<span style="color:#a6e22e">express</span>.<span style="color:#a6e22e">urlencoded</span>({<span style="color:#a6e22e">extended</span><span style="color:#f92672">:</span><span style="color:#66d9ef">true</span>}))
...
...

<span style="color:#75715e">//route handlers
</span><span style="color:#75715e">//app 的method 必須同form的method 一樣,而且url path也必須一樣
</span><span style="color:#75715e"></span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">post</span>(<span style="color:#e6db74">&#39;/contact&#39;</span>,((<span style="color:#a6e22e">req</span>,<span style="color:#a6e22e">res</span>)=&gt;{
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">body</span>)
})
</code></pre></div><h3 id="multipart-form-with-files">Multipart Form (with files)</h3>
<p>in <code>.html</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">form</span> <span style="color:#a6e22e">action</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/contact&#34;</span><span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;post&#34;</span> <span style="color:#a6e22e">enctype</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;multipart/form&#34;</span><span style="color:#f92672">&gt;</span>
...
<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;file&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;profile&#34;</span><span style="color:#f92672">&gt;</span>
...
<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/form&gt;</span>
</code></pre></div><p>in server</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">install</span> <span style="color:#a6e22e">multer</span>
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">storage</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">multer</span>.<span style="color:#a6e22e">diskStorage</span>({
  <span style="color:#a6e22e">destination</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">file</span>, <span style="color:#a6e22e">cb</span>) {
    <span style="color:#a6e22e">cb</span>(<span style="color:#66d9ef">null</span>, <span style="color:#a6e22e">path</span>.<span style="color:#a6e22e">resolve</span>(<span style="color:#e6db74">&#39;./public/uploads&#39;</span>));
  },
  <span style="color:#a6e22e">filename</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">file</span>, <span style="color:#a6e22e">cb</span>) {
    <span style="color:#a6e22e">cb</span>(<span style="color:#66d9ef">null</span>, <span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">file</span>.<span style="color:#a6e22e">fieldname</span><span style="color:#e6db74">}</span><span style="color:#e6db74">-</span><span style="color:#e6db74">${</span>Date.<span style="color:#a6e22e">now</span>()<span style="color:#e6db74">}</span><span style="color:#e6db74">.</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">file</span>.<span style="color:#a6e22e">mimetype</span>.<span style="color:#a6e22e">split</span>(<span style="color:#e6db74">&#39;/&#39;</span>)[<span style="color:#ae81ff">1</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>);
  }
})
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">upload</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">multer</span>({ <span style="color:#a6e22e">storage</span> })
<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">post</span>(<span style="color:#e6db74">&#39;/contact&#39;</span>, <span style="color:#a6e22e">upload</span>.<span style="color:#a6e22e">single</span>(<span style="color:#e6db74">&#39;profile&#39;</span>),(<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">res</span>)=&gt;{
   <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">body</span>)
   <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">file</span>){
        <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">image</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">file</span>.<span style="color:#a6e22e">filename</span>
   }
})
</code></pre></div><h3 id="data-set">data set</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">   <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;edit-form&#34;</span><span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">index</span><span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;${index}&#34;</span><span style="color:#f92672">&gt;</span>
   ...
   ...
   <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>

<span style="color:#66d9ef">in</span> <span style="color:#a6e22e">javascript</span>
 <span style="color:#a6e22e">button</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;click&#39;</span>,(<span style="color:#a6e22e">event</span>)=&gt;{
      <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">index</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">currentTarget</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;data-index&#39;</span>)
 })
</code></pre></div>
        </div>

        
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "hkman-1" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      </div>
    </div>
  </div>
</section>



<footer>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 text-center mb-5">
        <a href="https://hkman2018.github.io/"><img src="https://hkman2018.github.io/images/ting.PNG" alt="Kin &#39;s blog"></a>
      </div>
               
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Contact Me</h6>
        <ul class="list-unstyled">
          
                     
          <li class="mb-3"><i class="ti-location-pin mr-3 text-primary"></i>hongkong</li>
          
                     
          <li class="mb-3"><a class="text-dark" href="mailto:bobodee0130@gmail.com"><i
                class="ti-email mr-3 text-primary"></i>bobodee0130@gmail.com</a>
          
          </li>
        </ul>
      </div>
      
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Social Contacts</h6>
        <ul class="list-unstyled">
          
          <li class="mb-3"><a class="text-dark" href="bobodee0130@gmail.com">email</a></li>
          
          <li class="mb-3"><a class="text-dark" href="https://github.com/HKman2018">github</a></li>
          
        </ul>
      </div>
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Categories</h6>
        <ul class="list-unstyled">
          <li class="mb-3"><a class="text-dark"
              href="/categories/css">Css</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/git-%e8%aa%9e%e6%b3%95">Git 語法</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/markdown%e8%aa%9e%e6%b3%95">Markdown語法</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/notes">Notes</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/promise">Promise</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/socket-io">Socket io</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/sql">Sql</a>
          </li>
          <li class="mb-3"><a class="text-dark"
              href="/categories/tictactoe">Tictactoe</a>
          </li>
        </ul>
      </div>
      <div class="col-lg-3 col-sm-6 mb-5">
        <h6 class="mb-4">Quick Links</h6>
        <ul class="list-unstyled">
          
          <li class="mb-3"><a class="text-dark" href="https://hkman2018.github.io/about">About</a></li>
          
          <li class="mb-3"><a class="text-dark" href="https://hkman2018.github.io/contact">Contact</a></li>
          
        </ul>
      </div>
      <div class="col-12 border-top py-4 text-center">
        | copyright © 2021 <a href="https://themefisher.com">Themefisher</a> All Rights Reserved |
      </div>
    </div>
  </div>
</footer>

<script>
  var indexURL = "https://hkman2018.github.io/index.json"
</script>

<!-- JS Plugins -->

<script src="https://hkman2018.github.io/plugins/jQuery/jquery.min.js"></script>

<script src="https://hkman2018.github.io/plugins/bootstrap/bootstrap.min.js"></script>

<script src="https://hkman2018.github.io/plugins/slick/slick.min.js"></script>

<script src="https://hkman2018.github.io/plugins/venobox/venobox.min.js"></script>

<script src="https://hkman2018.github.io/plugins/search/fuse.min.js"></script>

<script src="https://hkman2018.github.io/plugins/search/mark.js"></script>

<script src="https://hkman2018.github.io/plugins/search/search.js"></script>

<!-- Main Script -->

<script src="https://hkman2018.github.io/js/script.min.js"></script>




<script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.min.js"></script>
<div id="js-cookie-box" class="cookie-box cookie-box-hide">
	This site uses cookies. By continuing to use this website, you agree to their use. <span id="js-cookie-button" class="btn btn-sm btn-primary ml-2">I Accept</span>
</div>
<script>
	(function ($) {
		const cookieBox = document.getElementById('js-cookie-box');
		const cookieButton = document.getElementById('js-cookie-button');
		if (!Cookies.get('cookie-box')) {
			cookieBox.classList.remove('cookie-box-hide');
			cookieButton.onclick = function () {
				Cookies.set('cookie-box', true, {
					expires:  2 
				});
				cookieBox.classList.add('cookie-box-hide');
			};
		}
	})(jQuery);
</script>


<style>
.cookie-box {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  text-align: center;
  z-index: 9999;
  padding: 1rem 2rem;
  background: rgb(71, 71, 71);
  transition: all .75s cubic-bezier(.19, 1, .22, 1);
  color: #fdfdfd;
}

.cookie-box-hide {
  display: none;
}
</style>
</body>
</html>